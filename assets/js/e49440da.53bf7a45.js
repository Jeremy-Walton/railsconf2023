"use strict";(self.webpackChunkrailsconf_2023=self.webpackChunkrailsconf_2023||[]).push([[22],{3905:(e,t,o)=>{o.d(t,{Zo:()=>p,kt:()=>h});var a=o(7294);function n(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function r(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,a)}return o}function i(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?r(Object(o),!0).forEach((function(t){n(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):r(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function s(e,t){if(null==e)return{};var o,a,n=function(e,t){if(null==e)return{};var o,a,n={},r=Object.keys(e);for(a=0;a<r.length;a++)o=r[a],t.indexOf(o)>=0||(n[o]=e[o]);return n}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)o=r[a],t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(n[o]=e[o])}return n}var l=a.createContext({}),c=function(e){var t=a.useContext(l),o=t;return e&&(o="function"==typeof e?e(t):i(i({},t),e)),o},p=function(e){var t=c(e.components);return a.createElement(l.Provider,{value:t},e.children)},u="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var o=e.components,n=e.mdxType,r=e.originalType,l=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),u=c(o),m=n,h=u["".concat(l,".").concat(m)]||u[m]||d[m]||r;return o?a.createElement(h,i(i({ref:t},p),{},{components:o})):a.createElement(h,i({ref:t},p))}));function h(e,t){var o=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var r=o.length,i=new Array(r);i[0]=m;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[u]="string"==typeof e?e:n,i[1]=s;for(var c=2;c<r;c++)i[c]=o[c];return a.createElement.apply(null,i)}return a.createElement.apply(null,o)}m.displayName="MDXCreateElement"},5408:(e,t,o)=>{o.d(t,{Z:()=>r});var a=o(7294);const n={card:"card_vceO",image:"image_EDOu",description:"description_Vdg7",position:"position_CmtU"};function r(e){let{imageUrl:t,name:o,position:r}=e;return a.createElement("div",{className:n.card},a.createElement("img",{src:t,className:n.image}),a.createElement("div",{className:n.description},a.createElement("p",null,o),a.createElement("p",{className:n.position},r)))}},2888:(e,t,o)=>{o.r(t),o.d(t,{assets:()=>c,contentTitle:()=>s,default:()=>m,frontMatter:()=>i,metadata:()=>l,toc:()=>p});var a=o(7462),n=(o(7294),o(3905)),r=o(5408);const i={sidebar_position:4},s="Catch Me If You Can: Learning to Process Webhooks in Your Rails App",l={unversionedId:"day-two/webhooks",id:"day-two/webhooks",title:"Catch Me If You Can: Learning to Process Webhooks in Your Rails App",description:"In this workshop, you\u2019ll learn how to catch and process webhooks like a pro.",source:"@site/docs/day-two/webhooks.mdx",sourceDirName:"day-two",slug:"/day-two/webhooks",permalink:"/railsconf2023/docs/day-two/webhooks",draft:!1,editUrl:"https://github.com/Jeremy-Walton/railsconf2023/tree/main/packages/create-docusaurus/templates/shared/docs/day-two/webhooks.mdx",tags:[],version:"current",sidebarPosition:4,frontMatter:{sidebar_position:4},sidebar:"tutorialSidebar",previous:{title:"Exploring the Power of Turbo Streams and ActionCable",permalink:"/railsconf2023/docs/day-two/turbo-streams-action-cable"},next:{title:"A Brewer's Guide to Filtering out Complexity and Churn",permalink:"/railsconf2023/docs/day-two/complexity"}},c={},p=[{value:"Attendees",id:"attendees",level:2},{value:"Notes",id:"notes",level:2},{value:"Why Webhooks?",id:"why-webhooks",level:3},{value:"GitHub Repo",id:"github-repo",level:3},{value:"Security",id:"security",level:3}],u={toc:p},d="wrapper";function m(e){let{components:t,...o}=e;return(0,n.kt)(d,(0,a.Z)({},u,o,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("h1",{id:"catch-me-if-you-can-learning-to-process-webhooks-in-your-rails-app"},"Catch Me If You Can: Learning to Process Webhooks in Your Rails App"),(0,n.kt)("p",null,"In this workshop, you\u2019ll learn how to catch and process webhooks like a pro."),(0,n.kt)(r.Z,{name:"Colin Loretz",position:"Senior Software Engineer at Orbit",imageUrl:"https://sessionize.com/image/b238-400o400o2-3XR9A4sGhZApiZ3xKKfav7.jpg",mdxType:"Speaker"}),(0,n.kt)(r.Z,{name:"Chris Oliver",position:"Owner of GoRails",imageUrl:"https://sessionize.com/image/5bb3-400o400o2-BagGwXKP82tmypy9at4AkN.jpeg",mdxType:"Speaker"}),(0,n.kt)("p",null,(0,n.kt)("a",{parentName:"p",href:"https://railsconf2023.sessionize.com/session/453439"},"Schedule Entry")),(0,n.kt)("p",null,(0,n.kt)("a",{parentName:"p",href:"https://github.com/colinloretz/railsconf-webhooks/blob/main/slides/railsconf.pdf"},"Slides")),(0,n.kt)("h2",{id:"attendees"},"Attendees"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Jeremy")),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr",align:null},"Relevancy"),(0,n.kt)("th",{parentName:"tr",align:null},"Interesting"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"4"),(0,n.kt)("td",{parentName:"tr",align:null},"5")))),(0,n.kt)("p",null,"Was relevant but very basic."),(0,n.kt)("h2",{id:"notes"},"Notes"),(0,n.kt)("h3",{id:"why-webhooks"},"Why Webhooks?"),(0,n.kt)("p",null,"Any service that wants to publish data to you rather than you reaching out."),(0,n.kt)("h3",{id:"github-repo"},"GitHub Repo"),(0,n.kt)("p",null,(0,n.kt)("a",{parentName:"p",href:"https://github.com/colinloretz/railsconf-webhooks"},"https://github.com/colinloretz/railsconf-webhooks")),(0,n.kt)("p",null,"Receive a POST request."),(0,n.kt)("p",null,"CSRF tokens need to be ignored for inbound requests and use a different method to authenticate."),(0,n.kt)("p",null,(0,n.kt)("em",{parentName:"p"},"Return to the provider as soon as possible. Use background jobs or something since they will continue to send until they get a good response.")),(0,n.kt)("p",null,(0,n.kt)("a",{parentName:"p",href:"https://webhooks.fyi/"},"Webhooks.fyi")),(0,n.kt)("p",null,"Github sends pings. May want to add a before action to check that."),(0,n.kt)("p",null,"Look at ",(0,n.kt)("a",{parentName:"p",href:"https://github.com/rails/rails/blob/main/actionmailbox/app/models/action_mailbox"},"rails/actionmailbox/app/models/action_mailbox at main \xb7 rails/rails \xb7 GitHub")),(0,n.kt)("h3",{id:"security"},"Security"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Verification methods",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"TLS, Oath, Asymetric keys, HMAC"))),(0,n.kt)("li",{parentName:"ul"},"Replay Attacks"),(0,n.kt)("li",{parentName:"ul"},"Dataless notifications")),(0,n.kt)("p",null,"The talk was very introductory as to how to process webhooks and structure your endpoints.\nTwo main takeaways:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Look at how Rails does this for ActionMailBox and emulate that pattern (structure and strategy)"),(0,n.kt)("li",{parentName:"ul"},"Capture the data in something like InboundWebhooks model and create background jobs to process them later (This is effectively Rails pattern). This means you can respond quickly to the hook and move potential bottlenecks from your controllers to your database.")))}m.isMDXComponent=!0}}]);